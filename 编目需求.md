我现在需要做一个演示用的小项目，有如下几个需求

在项目中所使用的 LLM 为 openai 的 4o 模型
key = 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


🗂️ 项目目录结构说明

项目目录中包含一个 data/ 文件夹，内部包含以下内容：
	•	data/DDL/：存放以表名为文件名的建表 SQL 脚本（即 DDL）
	•	data/ETL/：存放以表名为文件名的加工 SQL 脚本（即 ETL，部分表存在）
	•	data/data_catalog.csv：用于保存用户完成的编目信息（CSV 格式，支持增量更新）

⸻

📌 功能模块设计

⸻

功能 1：资源列表页（表格展示）

目标：读取所有 DDL 文件，解析表名、字段信息，展示为一个资源列表表格。

字段包括：

字段	描述	数据来源
表中文名	表注释/注释行	从 DDL 中解析
表英文名	表名称（文件名）	DDL 文件名
所在分层	STG / ODS / DWD / ADS	表名前缀（如 ods_xxx）
编目状态	已编目 / 未编目	根据是否存在于 data_catalog.csv 判断
操作列	展示按钮：详情 / 编目	固定按钮操作


⸻

功能 2：详情查看（抽屉弹出）

目标：点击“详情”按钮，抽屉展示该表的字段详情

字段包括：

字段	描述	数据来源
字段中文名	字段注释	解析 DDL 的字段定义部分
字段英文名	字段名称	同上
字段类型	数据类型	同上


⸻

功能 3：编目功能（抽屉 + 表单编辑）

触发：点击“编目”按钮时启动，首次点击才触发分析过程。

✳️ 自动填充字段（系统分析）

字段	描述	填充逻辑
信息资源名称	使用表中文名	DDL 注释
信息资源摘要	生成一句话概括	使用 AI 生成（结合表与字段名）
信息资源格式	固定值 table	固定值
重点领域分类	枚举值，自动判断	结合字段/表名由 AI 判定
组织机构名称	所属局委办	AI 从表名和字段信息中判断
IRS系统名称	所属 IRS 系统名	同上
表英文名称	表名	DDL 文件名
字段中文名 / 英文名 / 数据类型	字段列表	从 DDL 解析
是否为加工表	是 / 否	若在 ETL 中有对应 SQL 文件则为“是”

✳️ 若为加工表，需附加以下字段（从 ETL 中提取）：

字段	描述	填充逻辑
来源表列表	依赖的表名及其中文名	从 SQL 中提取依赖表及 JOIN 信息
加工逻辑	概括加工方式	使用 AI 归纳 SQL 的核心业务逻辑，转为人类可读句子

所有字段支持用户修改；字段列表也支持手动增减字段。

⸻

💾 数据持久化规则
	•	所有编目信息保存至 data/data_catalog.csv
	•	编目数据结构以 表英文名的 Hash 作为主键，用于判定是否已存在记录
	•	如果已有记录，则覆盖更新；否则新增记录（增量更新）

⸻

✅ 其他约定
	•	不预先计算所有表的编目信息，仅在用户点击“编目”按钮时才进行计算
	•	使用标准 CSV 格式保存（含 UTF-8 BOM 以兼容 Excel）
	•	所有交互使用网页界面，抽屉组件用于详情与表单


---
功能 4 

任务目标：为我的数据目录系统开发一个基于 RAG 的智能问答功能（DataCatalogChat），该功能要求与 data_catalog.csv 实时同步，支持用户完成一次编目后系统自动更新知识库。

具体功能如下：
	1.	知识库建立：
		•	将 data/data_catalog.csv 中每一条记录转为自然语言描述并作为文档接入向量数据库（如 FAISS / Chroma）
		•	支持字段如：信息资源名称、表英文名称、重点领域分类、字段信息、组织机构、IRS系统、加工逻辑等
	2.	同步更新机制：
		•	实现监听 data_catalog.csv 的能力（建议使用文件监听器 chokidar / watchdog）
		•	每当文件变更时，自动识别新增/修改的行，并更新向量数据库
		•	主键建议用表英文名或其 hash
	3.	嵌入生成与索引更新：
		•	将每条记录拼成自然语言 prompt，再调用嵌入模型生成向量并存储
		•	向量数据用于后续检索问答支持
	4.	问答接口：
		•	提供一个 Chat UI 或 API（如 /catalog-chat），支持问题如：
		•	“有哪些DWD层的资源？”
		•	“和医疗相关的表有哪些？”
		•	“ods_population_base 表的字段是什么？”
		•	问答结果引用当前最新 data_catalog 中的结构化内容


✅ 架构要求
	•	前端使用 antdesign 的框架
	•	后端建议使用：Python 
	•	SQL 解析建议使用：如使用 LLM，LLM 信息已提供
